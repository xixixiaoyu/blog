# 写作提示 —— AI 应用的可观测性与监控

使用说明：
- 生成一篇关于 AI 应用可观测性与监控的工程实践文章，重点关注全栈视角。

生成目标：
- 解释可观测性的三大支柱：日志（Logging）、追踪（Tracing）、指标（Metrics）。
- 结合 AI 应用的特点，阐述每个支柱需要关注的具体内容。
- 提供一个基于 OpenTelemetry 的端到端追踪示例（前端 -> 后端 -> 模型服务）。
- 介绍关键的监控指标与告警策略。

大纲建议：
1.  **为什么 AI 应用需要专门的可观测性策略？**
    *   非确定性、高延迟、高成本、复杂的调用链。
2.  **日志（Logging）：记录关键足迹**
    *   记录什么：Prompt/Completion、Token 数量、函数调用、用户反馈。
    *   结构化日志的最佳实践。
3.  **追踪（Tracing）：端到端透视请求**
    *   使用 OpenTelemetry 实现前端、后端、模型服务、数据库的链路追踪。
    *   如何分析火焰图，定位延迟瓶颈。
4.  **指标（Metrics）：量化系统健康度**
    *   **性能指标**：端到端延迟、首 Token 延迟、Token 生成速率。
    *   **成本指标**：Token 消耗量、API 调用费用。
    *   **质量指标**：用户反馈（点赞/点踩）率、函数调用成功率、幻觉率。
    *   **业务指标**：功能使用率、用户留存。
5.  **告警（Alerting）：主动发现问题**
    *   设置告警阈值：成本超预算、P99 延迟过高、错误率激增。
    *   告警渠道集成（Slack、Email）。
6.  **工具选型与集成**
    *   开源方案：Prometheus, Grafana, Jaeger, OpenTelemetry。
    *   商业方案：LangSmith, Datadog, Sentry。

输出格式要求：
- Markdown 格式。
- 提供基于 OpenTelemetry 的伪代码或真实代码示例。
- 包含一个 Grafana 仪表盘的示例截图或描述。

质量检查清单：
- 概念清晰，指标明确。
- 追踪示例具有可操作性。
- 覆盖从数据采集到可视化告警的全流程。

# 写作提示 —— 请求模式与并发

使用说明：
- 介绍在 AI 应用中常见的请求模式与并发控制方案，兼顾稳定性与成本。

生成目标：
- 总结串行、并行、批处理、队列化、幂等与重试退避策略。
- 提供服务端代理层的并发控制示例（速率限制、令牌桶、队列长度）。
- 考虑流式响应与 UI 体验的并发设计。

大纲建议：
1. 需求与约束（速率限制、配额、用户体验）
2. 请求模式设计（串行、并行、批量、队列）
3. 并发控制（限流、熔断、重试与退避、超时与取消）
4. 流式响应的并发策略（分片渲染、优先级调度）
5. 监控与预警（延迟、错误率、排队时间、丢弃率）
6. 成本与资源权衡（缓存、结果复用、降级）

输出格式要求：
- Markdown；附最小代理层实现示例（Node/Nest）。
- 给出参数建议与默认值参考。

质量检查清单：
- 并发策略可落地，有代码或伪代码。
- 兼顾用户体验与成本控制，具备可观测性设计。
- 明确异常与退避策略，避免雪崩效应。

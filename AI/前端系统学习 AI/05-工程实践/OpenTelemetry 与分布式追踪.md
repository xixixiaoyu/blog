# 写作提示 —— OpenTelemetry 与分布式追踪

使用说明：
- 生成跨前后端的分布式追踪方案，串联一次会话的端到端链路。

生成目标：
- 设计 Trace/Span 与上下文传播（前端 → 代理层 → 模型服务 → 向量库）。
- 在流式响应中记录事件与耗时；关联日志与指标。
- 提供可视化与报表实践（仪表板、告警、根因分析）。

大纲建议：
1. 追踪模型与上下文传播（Trace/Span/ID）
2. 前端埋点与链路起点（会话/消息 ID）
3. 代理层与后端追踪（SSE/WS/gRPC 的 span 切分）
4. 模型与检索层追踪（耗时与错误）
5. 日志与指标的关联（统一 ID、采样率）
6. 可视化、告警与根因分析（仪表板）

输出格式要求：
- Markdown；附最小追踪集成示例与字段约定。
- 给出采样率与性能影响的建议。

质量检查清单：
- 链路可串联；跨层标识统一，便于定位问题。
- 采样与性能权衡合理；可视化清晰。
- 与日志与评估形成闭环。


# 写作提示 —— 构建可维护、可评估的 Prompt 工程体系

**核心目标**：为全栈开发团队提供一份系统化的 Prompt 工程指南。本文旨在将 Prompt 的创建与管理从一门“玄学”提升为一门严谨的“工程学科”，核心是建立一套可维护、可评估、可回归的 Prompt 资产库。

---

### 1. 生成要求

- **读者画像**：具备良好工程素养的全栈开发者、AI 工程师或技术负责人。
- **核心理念**：`Prompt as Code`。将 Prompt 视为项目中的一等公民，与代码一同接受版本控制、测试和迭代。
- **风格**：结构清晰，逻辑严谨，充满工程思维。提供标准化的流程和可复用的模板。

---

### 2. 内容大纲

**第一部分：Prompt 的设计与创作 (Authoring)**

1.  **引言：从“手工艺品”到“工业化生产”**
    *   为什么临时、碎片化的 Prompt 会拖垮项目？
    *   目标：建立一套标准化的 Prompt 设计流程。

2.  **CRISPE 框架：高质量 Prompt 的设计清单**
    *   **C (Capacity & Role)**：为 AI 指定一个角色和能力边界 (e.g., "你是一位资深的前端架构师...")。
    *   **R (Result)**：明确定义你期望的最终产出物 (e.g., "...生成一份组件库选型报告")。
    *   **I (Intent)**：阐明任务的意图和上下文 (e.g., "这份报告用于说服 CTO...")。
    *   **S (Style & Tone)**：规定输出的风格和语气 (e.g., "风格要求专业、严谨，多用数据支撑")。
    *   **P (Persona)**：设定 AI 回应的目标受众 (e.g., "读者是 CTO，他对技术细节不感兴趣，只关心 ROI")。
    *   **E (Examples)**：提供一到两个高质量的示例 (Few-shot)，是统一输出格式和质量的最有效手段。

**第二部分：Prompt 的开发与集成 (Development)**

3.  **结构化输出：让 AI 的回应稳定可靠**
    *   **为什么需要结构化**：告别用正则表达式解析字符串的噩梦。
    *   **黄金标准：JSON Schema**：如何使用 JSON Schema 来强制 AI 输出我们期望的、格式完全固定的 JSON 对象。
    *   **结合 Function Calling**：当 AI 需要调用外部工具时，JSON Schema 如何定义其返回的参数结构。
    *   **防御性设计**：处理 AI 无法生成有效 JSON 时的重试与回退逻辑。

4.  **模板化与版本控制**
    *   **Prompt 模板库**：使用模板引擎（如 Handlebars, Jinja）管理 Prompt，动态插入变量。
    *   **版本控制**：将 Prompt 模板（`.prompt` 文件）纳入 Git 管理，每次变更都有记录、可追溯、可回滚。

**第三部分：Prompt 的评估与迭代 (Evaluation)**

5.  **建立评估体系：科学地判断 Prompt 的好坏**
    *   **拒绝体感**：为什么“我感觉效果不错”是危险的。
    *   **定义评估维度 (Rubrics)**：为每个任务设定清晰的、可量化的评分标准。例如，一个“代码生成”任务的评估维度可以是：`正确性 (满分 5)`、`可读性 (满分 3)`、`性能 (满分 2)`。
    *   **评估方法**：
        *   **人工评估**：邀请领域专家根据 Rubrics 进行打分。
        *   **AI 辅助评估**：使用更强的模型（如 GPT-4）作为“裁判”，根据 Rubrics 自动为产出打分。

6.  **构建回归测试集**
    *   **“黄金数据集”**：为核心场景准备一个包含典型输入和期望输出（或评估标准）的测试集。
    *   **自动化回归**：每次修改 Prompt 后，自动运行整个黄金数据集，对比关键评估指标的变化，确保优化没有引入新的问题。

**第四部分：Prompt 的治理 (Governance)**

7.  **建立团队的 Prompt 资产库**
    *   **统一管理**：在一个地方查看、搜索和复用项目所有的 Prompt 模板。
    *   **文档与元数据**：为每个 Prompt 记录其作者、版本、变更历史、评估报告和使用场景。
    *   **最佳实践分享**：定期 Review，沉淀团队的 Prompt 最佳实践。

---

### 3. 质量检查清单

- [ ] **框架实用性**：CRISPE 框架是否清晰、易于记忆和在实践中应用？
- [ ] **工程最佳实践**：结构化输出、版本控制和评估体系是否遵循了现代软件工程的最佳实践？
- [ ] **可操作性**：指南中提供的流程和工具（如 JSON Schema, Git, 模板引擎）是否具体、可落地？
- [ ] **闭环思维**：是否完整覆盖了从设计、开发、评估到治理的整个生命周期，形成了一个可持续迭代的闭环？
- [ ] **风险提示**：是否强调了 Prompt 工程中的常见陷阱（如评估偏差、测试集污染）并给出了规避建议？

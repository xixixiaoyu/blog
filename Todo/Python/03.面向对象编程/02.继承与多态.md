# Python 继承与多态

## 最佳提示词

```
请详细介绍 Python 的继承与多态，包括以下内容：

1. 继承机制：
   - 单继承与多继承
   - 方法解析顺序（MRO）
   - super() 函数的使用
   - 继承中的初始化
   - 方法重写

2. 多态性：
   - 多态的概念与实现
   - 鸭子类型
   - 抽象基类（ABC）
   - 接口的概念

3. 高级继承特性：
   - Mixin 模式
   - 多重继承的复杂性
   - 钻石继承问题
   - 继承与组合的选择

4. 设计原则：
   - 里氏替换原则
   - 开闭原则
   - 继承的滥用问题
   - 何时使用继承

请为每个概念提供详细的代码示例，包括实际应用场景和最佳实践。
```

## 学习要点

- 理解继承的基本概念和语法
- 掌握单继承和多继承的使用
- 理解方法解析顺序（MRO）
- 学会使用 super() 函数
- 掌握方法重写的技巧
- 理解多态性的实现原理
- 学会使用抽象基类
- 了解鸭子类型的概念
- 掌握 Mixin 模式的使用

## 实践练习

1. 创建单继承的类层次结构
2. 实现多继承并观察 MRO
3. 使用 super() 调用父类方法
4. 实现方法重写
5. 创建抽象基类和具体实现
6. 实现鸭子类型的多态
7. 使用 Mixin 模式
8. 分析继承与组合的适用场景

## 代码示例模板

```python
# 单继承示例
class Animal:
    """动物基类"""
    def __init__(self, name):
        self.name = name
    
    def speak(self):
        """发出声音"""
        pass

class Dog(Animal):
    """狗类，继承自动物"""
    def speak(self):
        return f"{self.name} says Woof!"

class Cat(Animal):
    """猫类，继承自动物"""
    def speak(self):
        return f"{self.name} says Meow!"

# 多继承示例
class Flyable:
    """可飞行接口"""
    def fly(self):
        return "Flying"

class Swimmable:
    """可游泳接口"""
    def swim(self):
        return "Swimming"

class Duck(Animal, Flyable, Swimmable):
    """鸭子类，多重继承"""
    def speak(self):
        return f"{self.name} says Quack!"

# 抽象基类示例
from abc import ABC, abstractmethod

class Shape(ABC):
    """形状抽象基类"""
    
    @abstractmethod
    def area(self):
        """计算面积"""
        pass
    
    @abstractmethod
    def perimeter(self):
        """计算周长"""
        pass

class Rectangle(Shape):
    """矩形类"""
    def __init__(self, width, height):
        self.width = width
        self.height = height
    
    def area(self):
        return self.width * self.height
    
    def perimeter(self):
        return 2 * (self.width + self.height)

# Mixin 模式示例
class LogMixin:
    """日志混入类"""
    def log(self, message):
        print(f"[LOG] {message}")

class TimestampMixin:
    """时间戳混入类"""
    import datetime
    def timestamp(self):
        return self.datetime.datetime.now()

class User(LogMixin, TimestampMixin):
    """用户类，使用 Mixin"""
    def __init__(self, username):
        self.username = username
    
    def login(self):
        self.log(f"User {self.username} logged in at {self.timestamp()}")

# 鸭子类型示例
class Duck:
    def quack(self):
        return "Quack!"

class Person:
    def quack(self):
        return "I'm imitating a duck!"

def make_it_quack(duck_like):
    """不关心具体类型，只要有 quack 方法即可"""
    return duck_like.quack()

# 使用示例
duck = Duck()
person = Person()
print(make_it_quack(duck))    # Quack!
print(make_it_quack(person))  # I'm imitating a duck!
```

## 扩展资源

- [Python 继承文档](https://docs.python.org/3/tutorial/classes.html#inheritance)
- [抽象基类文档](https://docs.python.org/3/library/abc.html)
- [方法解析顺序](https://www.python.org/download/releases/2.3/mro/)
- [设计模式详解](https://refactoring.guru/design-patterns)